{% extends "base.html" %}
{% block content %}
<div class="row">
  <div class="col-lg-8 col-xl-7">
    <div class="card card-shadow p-4">
      <h1 class="h5">Crear servicio</h1>
      <form method="post">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

        {% if is_admin %}
          <div class="mb-3">
            <label class="form-label">Propietario (crear a nombre de)</label>
            <select class="form-select" name="owner_id">
              {% for u in users %}
                <option value="{{ u.id }}" {% if u.id==current_user.id %}selected{% endif %}>{{ u.id }} — {{ u.name }} ({{ u.email }})</option>
              {% endfor %}
            </select>
          </div>
        {% else %}
          <div class="mb-3">
            <label class="form-label">Propietario</label>
            <input class="form-control" value="{{ current_user.name }} — {{ current_user.email }}" disabled>
          </div>
        {% endif %}

        <div class="mb-3">
          <label class="form-label">Título</label>
          <input class="form-control" name="title" required>
        </div>
        <div class="mb-3">
          <label class="form-label">Descripción</label>
          <textarea class="form-control" name="description" rows="4"></textarea>
        </div>

        <div class="row g-3">
          <div class="col-md-6">
            <label class="form-label">Sitio web</label>
            <input class="form-control" name="website" placeholder="https://...">
          </div>
          <div class="col-md-6">
            <label class="form-label">Red social</label>
            <input class="form-control" name="social" placeholder="https://instagram.com/...">
          </div>
          <div class="col-12">
            <label class="form-label">Dirección</label>
            <input class="form-control" name="address">
          </div>
        </div>

        <hr class="my-4">

        {% if is_admin %}
          <div class="alert alert-info py-2 small">Como administrador, puedes definir/editar el contacto de este servicio.</div>
          <div class="row g-3">
            <div class="col-md-4">
              <label class="form-label">Nombre de contacto</label>
              <input class="form-control" name="contact_name">
            </div>
            <div class="col-md-4">
              <label class="form-label">Email de contacto</label>
              <input class="form-control" name="contact_email" type="email">
            </div>
            <div class="col-md-4">
              <label class="form-label">Teléfono de contacto</label>
              <input class="form-control" name="contact_phone">
            </div>
          </div>
        {% else %}
          <div class="alert alert-secondary small">
            El contacto del servicio será tu nombre, email y teléfono de perfil. Para cambiarlo, edita tu perfil.
          </div>
          <div class="row g-3">
            <div class="col-md-4">
              <label class="form-label">Nombre de contacto</label>
              <input class="form-control" value="{{ current_user.name }}" disabled>
            </div>
            <div class="col-md-4">
              <label class="form-label">Email de contacto</label>
              <input class="form-control" value="{{ current_user.email }}" disabled>
            </div>
            <div class="col-md-4">
              <label class="form-label">Teléfono de contacto</label>
              <input class="form-control" value="{{ current_user.phone or '' }}" disabled>
            </div>
          </div>
        {% endif %}

        <div class="mt-3">
          <button class="btn btn-primary">Guardar</button>
          <a class="btn btn-outline-secondary" href="{{ url_for('services.my_services') }}">Cancelar</a>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}
