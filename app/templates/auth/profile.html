{% extends "base.html" %}
{% block content %}
<div class="row justify-content-center">
  <div class="col-12 col-lg-8 col-xl-7">
    <div class="card card-shadow p-4">
      <h1 class="h5 mb-3">Mi perfil</h1>
      <form method="post" enctype="multipart/form-data">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
        <div class="row g-3">
          <div class="col-12 col-md-4 text-center">
            <div class="mb-2">
              {% if current_user.avatar_url %}
                <img src="{{ current_user.avatar_url }}" alt="avatar" class="rounded-circle" style="width:120px;height:120px;object-fit:cover;">
              {% else %}
                <div class="rounded-circle bg-body-secondary d-inline-flex align-items-center justify-content-center" style="width:120px;height:120px;">
                  <i class="bi bi-person fs-1"></i>
                </div>
              {% endif %}
            </div>
            <div class="mb-3">
              <label class="form-label">Cambiar avatar</label>
              <input name="avatar_file" type="file" class="form-control" accept=".png,.jpg,.jpeg,.webp,.gif">
              <div class="form-text">Máx {{ (config.AVATAR_MAX_SIZE or 2097152) // 1024 }} KB</div>
            </div>
          </div>

          <div class="col-12 col-md-8">
            <div class="mb-3">
              <label class="form-label">Nombre</label>
              <input name="name" type="text" class="form-control" value="{{ current_user.name }}">
            </div>
            <div class="mb-3">
              <label class="form-label">Teléfono</label>
              <input name="phone" type="text" class="form-control" value="{{ current_user.phone or '' }}">
            </div>
            <div class="mb-3">
              <label class="form-label">Dirección</label>
              <input name="address" type="text" class="form-control" value="{{ current_user.address or '' }}">
            </div>
            <div class="mb-3">
              <label class="form-label">Email</label>
              <input name="email" type="email" class="form-control" value="{{ current_user.email }}">
              <div class="form-text">
                Cambiar el email requerirá verificación nuevamente.
              </div>
            </div>
            <div class="mb-3">
              <label class="form-label">Nueva contraseña</label>
              <input name="password" type="password" class="form-control" placeholder="Dejar en blanco para no cambiar">
            </div>
            <button class="btn btn-primary">Guardar cambios</button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}
